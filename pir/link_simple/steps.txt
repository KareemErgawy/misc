; Produce llvm bitcode from main.cpp. 
./bin/clang++ -S -emit-llvm ./../../crap/code/pir/link_simple/main.cpp -I/usr/lib/gcc/x86_64-redhat-linux/6.3.1/include/ -o ../../crap/code/pir/link_simple/main.ll
./bin/llvm-as ../../crap/code/pir/link_simple/main.ll

; Lower simple.ll to OpenMP runtime.
./bin/opt -pir2omp ../../crap/code/pir/link_simple/simple.ll -o ../../crap/code/pir/link_simple/simple.bc

; Link the 2 bitcode files.
./bin/llvm-link ../../crap/code/pir/link_simple/main.bc ../../crap/code/pir/link_simple/simple.bc -o ../../crap/code/pir/link_simple/linked.bc

; Compile the linked result to the target object
./bin/llc -filetype=obj ../../crap/code/pir/link_simple/linked.bc

; Link the target object file with stdc++ and omp libraries
gcc linked.o -L/usr/lib/gcc/x86_64-redhat-linux/6.3.1 -L/usr/lib/gcc/x86_64-redhat-linux/6.3.1/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib/gcc/x86_64-redhat-linux/6.3.1/../../.. -L/home/ergawy/llvm-upstream/release/bin/../lib -L/lib -L/usr/lib -lomp -lstdc++
